webpackJsonp([14],{"4DWC":function(e,r){},N1xB:function(e,r,o){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=o("aA9S"),t=o.n(s),n=o("gyMJ"),a={name:"means",data:function(){return{imageUrl:""+this.$store.state.user.photo,personForm:{nickname:"",signature:"",sex:"",email:"",phone:""},showCrop:!1,cropUrl:"",personRules:{nickname:[{validator:function(e,r,o){if(""===r)o();else{if(r.length>12)return void o(new Error("请输入不超过12位字符"));o()}},trigger:"blur"}],phone:[{validator:function(e,r,o){if(""===r)o();else{if(!/^1[3|4|5|7|8]\d{9}$/.test(r))return void o(new Error("请输入正确的手机格式！"));o()}},trigger:"blur"}],email:[{validator:function(e,r,o){if(""===r)o();else{if(!/^[A-Za-z0-9._%-]+@([A-Za-z0-9-]+\.)+[A-Za-z]{2,4}$/.test(r))return void o(new Error("请输入正确的邮箱格式！"));o()}},trigger:"blur"}],signature:[{validator:function(e,r,o){if(""===r)o();else{if(r.length>100)return void o(new Error("请输入不超过100位字符"));o()}},trigger:"blur"}]}}},components:{cropper:o("GR0b").default},methods:{getAvatar:function(e){var r=this;this.imageUrl=""+e,this.showCrop=!1,n.a.upUserInfo({photo:e}).then(function(o){0===o.code?(r.$message({message:"保存头像成功",type:"success"}),r.$store.commit("setUser",{photo:e})):r.$message({message:"保存头像失败",type:"success"})})},handleClose:function(e){this.cropUrl="",e()},setShowCrop:function(){this.showCrop=!0,this.cropUrl=this.imageUrl},saveInfo:function(){var e=this;this.$refs.personForm.validate(function(r){if(!r)return!1;n.a.upUserInfo(e.personForm).then(function(r){0===r.code?(e.$message({message:"保存成功",type:"success"}),e.$store.commit("setUser",{nickname:e.personForm.nickname,signature:e.personForm.signature})):e.$message({message:"保存失败",type:"success"})})})},getUserDetail:function(){var e=this;n.a.getUserDetail().then(function(r){0===r.code&&(e.personForm=t()(e.personForm,r.data))})}},mounted:function(){this.getUserDetail()}},i={render:function(){var e=this,r=e.$createElement,o=e._self._c||r;return o("div",{staticClass:"person-means"},[o("el-form",{ref:"personForm",staticClass:"personForm",attrs:{"label-width":"80px",model:e.personForm,rules:e.personRules}},[o("el-form-item",{attrs:{label:"头像"}},[o("div",{staticClass:"avatar",on:{click:e.setShowCrop}},[o("img",{attrs:{src:e.imageUrl}})])]),e._v(" "),o("el-form-item",{attrs:{label:"性别"}},[o("el-radio",{attrs:{label:"1"},model:{value:e.personForm.sex,callback:function(r){e.$set(e.personForm,"sex",r)},expression:"personForm.sex"}},[e._v("男")]),e._v(" "),o("el-radio",{attrs:{label:"2"},model:{value:e.personForm.sex,callback:function(r){e.$set(e.personForm,"sex",r)},expression:"personForm.sex"}},[e._v("女")]),e._v(" "),o("el-radio",{attrs:{label:"3"},model:{value:e.personForm.sex,callback:function(r){e.$set(e.personForm,"sex",r)},expression:"personForm.sex"}},[e._v("保密")])],1),e._v(" "),o("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[o("el-input",{attrs:{placeholder:"名称"},model:{value:e.personForm.nickname,callback:function(r){e.$set(e.personForm,"nickname",r)},expression:"personForm.nickname"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"手机",prop:"phone"}},[o("el-input",{attrs:{placeholder:"手机"},model:{value:e.personForm.phone,callback:function(r){e.$set(e.personForm,"phone",r)},expression:"personForm.phone"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"电子邮箱",prop:"email"}},[o("el-input",{attrs:{placeholder:"电子邮箱"},model:{value:e.personForm.email,callback:function(r){e.$set(e.personForm,"email",r)},expression:"personForm.email"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"个性签名",prop:"signature"}},[o("el-input",{attrs:{placeholder:"签名（不超过100位字符）",type:"textarea",aotusize:"",resize:"none"},model:{value:e.personForm.signature,callback:function(r){e.$set(e.personForm,"signature",r)},expression:"personForm.signature"}})],1)],1),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.saveInfo}},[e._v("保存")]),e._v(" "),o("el-dialog",{attrs:{visible:e.showCrop,width:"700px","before-close":e.handleClose},on:{"update:visible":function(r){e.showCrop=r}}},[o("cropper",{attrs:{url:e.cropUrl},on:{avatar:e.getAvatar}})],1)],1)},staticRenderFns:[]};var l=o("C7Lr")(a,i,!1,function(e){o("4DWC")},"data-v-1a2a4f5e",null);r.default=l.exports}});