webpackJsonp([1,3],{Ina9:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s("aA9S"),n=s.n(r),i=s("gyMJ"),a={name:"chat",props:["currGroup"],data:function(){return{IMG_URL:"",List:[],name:window.localStorage.name,mes:"",groupUsers:[]}},watch:{List:function(t){console.log("list",t),this.$refs.msglist.scrollTop=this.$refs.msglist.scrollHeight+200},currGroup:function(t){t&&this.getGroupUsers()}},sockets:{connect:function(t){},customEmit:function(t){},org:function(t){this.List.push(n()({},t,{type:"org"}))},mes:function(t){this.List.push(n()({},t,{type:"other"}))}},methods:{exit:function(){this.$router.push("/")},send:function(){var t={name:this.name,mes:this.mes};this.List.push(n()({},t,{type:"mine"})),this.$socket.emit("mes",this.$socket.id,t),this.mes=""},getGroupUsers:function(){var t=this,e={groupId:this.currGroup};i.a.getGroupUsers(e).then(function(e){0===e.code&&(t.groupUsers=e.data)})}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chat"},[s("div",{staticClass:"chat-l"},[s("div",{staticClass:"chat-l-top"},[s("ul",{ref:"msglist"},t._l(t.List,function(e,r){return s("li",{key:r,class:[{other:"other"===e.type},{mine:"mine"===e.type},{org:"org"===e.type}]},["other"===e.type?[s("p",[t._v(t._s(e.name?e.name.slice(0,1):""))]),t._v(" "),s("div",[s("span",[t._v(t._s(e.name)),s("i",[t._v(" 2018-06-07 14:12:56 ")])]),t._v(" "),s("p",[t._v("\n                                "+t._s(e.mes)+"\n                        ")])])]:t._e(),t._v(" "),"mine"===e.type?[s("div",[s("span",[t._v(t._s(e.name)),s("i",[t._v(" 2018-06-07 14:18:56 ")])]),t._v(" "),s("p",[t._v("\n                                "+t._s(e.mes)+"\n                        ")])]),t._v(" "),s("p",[t._v(t._s(e.name?e.name.slice(0,1):""))])]:t._e(),t._v(" "),"org"===e.type?[t._v("\n                        系统消息："),s("span",[t._v(t._s(e.name))]),t._v("加入聊天室！\n                    ")]:t._e()],2)}))]),t._v(" "),s("div",{staticClass:"chat-l-bottom"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.mes,expression:"mes"}],domProps:{value:t.mes},on:{input:function(e){e.target.composing||(t.mes=e.target.value)}}}),t._v(" "),s("span",{on:{click:t.send}},[t._v("发送")])])]),t._v(" "),s("div",{staticClass:"chat-r"},[s("h4",[t._v("群成员 ("+t._s(t.groupUsers.length)+")")]),t._v(" "),s("ul",t._l(t.groupUsers,function(e){return s("li",{key:e.userId._id},[s("p",[s("img",{attrs:{src:t.IMG_URL+e.userId.photo,alt:""}})]),t._v(" "),s("span",[t._v(t._s(e.userName))])])}))])])},staticRenderFns:[]};var u=s("C7Lr")(a,o,!1,function(t){s("nOIk")},"data-v-db707e02",null);e.default=u.exports},OLax:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={data:function(){return{currGroup:""}},components:{chat:s("Ina9").default},methods:{getCurrGroup:function(t){this.currGroup=t}}},n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"vChat-group"},[e("div",{staticClass:"vChat-group-list"},[e("transition",{attrs:{name:"move"}},[e("router-view",{on:{currGroup:this.getCurrGroup}})],1)],1),this._v(" "),e("div",{staticClass:"vChat-group-chat"},[e("chat",{attrs:{currGroup:this.currGroup}})],1)])},staticRenderFns:[]};var i=s("C7Lr")(r,n,!1,function(t){s("Pzjz")},"data-v-8b3a3fa6",null);e.default=i.exports},Pzjz:function(t,e){},nOIk:function(t,e){}});